
@api_bp.route('/<root_id>/goals/<goal_id>', methods=['GET'])
def get_fractal_goal(root_id, goal_id):
    """Get a specific goal by ID within a fractal."""
    session = get_session(engine)
    try:
        # Validate root goal exists
        root = validate_root_goal(session, root_id)
        if not root:
            return jsonify({"error": "Fractal not found"}), 404
        
        # Get the goal
        goal = session.query(Goal).filter_by(id=goal_id).first()
        
        if not goal:
            return jsonify({"error": "Goal not found"}), 404
        
        # Verify goal belongs to this fractal
        goal_root = get_root_goal(session, goal_id)
        if not goal_root or goal_root.id != root_id:
            return jsonify({"error": "Goal does not belong to this fractal"}), 403
        
        # Return goal data
        result = build_goal_tree(session, goal)
        return jsonify(result)
        
    finally:
        session.close()

